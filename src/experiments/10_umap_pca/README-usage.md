# UMAP+PCA 分析ダッシュボード

このアプリケーションは、高次元データをUMAPとPCAを組み合わせて可視化・分析するダッシュボードです。UMAPビュー（グローバルビュー）とPCAビューを同時に表示し、UMAPでの選択がPCAビューでの重み付き分析に反映されます。

## 機能

- **UMAPビュー（グローバルビュー）**: 全データの2次元への投影、ラベル/クラスタごとの色付け
- **PCAビュー**: UMAPビューで選択したポイントに基づく重み付きPCAのアニメーション
- **詳細ビュー**: 選択された点の詳細情報とMNIST画像表示（Plotlyで実装）
- **次元の軸説明**: PCA主成分のヒートマップ表示（Plotlyで実装）

## 必要条件

- Python 3.8以上
- 下記のPythonパッケージ:
  - dash==2.11.1
  - dash-bootstrap-components==1.4.1
  - pandas==2.0.3
  - numpy==1.24.3
  - plotly==5.15.0
  - scikit-learn==1.3.0
  - umap-learn==0.5.3
  - matplotlib==3.7.2

## インストール方法

1. 依存パッケージをインストール:
   ```
   pip install -r requirements.txt
   ```

## 使用方法

1. アプリケーションを起動:
   ```
   python app.py
   ```

2. ウェブブラウザで http://127.0.0.1:8050/ を開きます。

## 操作方法

1. **UMAPビュー**:
   - グラフ上のポイントをクリック: 詳細情報を表示
   - ラッソ選択: 複数ポイントを選択してPCAビューでの重み付き分析に使用
   - 色分けラジオボタン: ラベル/クラスタによる色分けを切り替え

2. **PCAビュー**:
   - スライダー: 標準PCAから選択点に重みを置いたPCAへのアニメーション
   - グラフ上のポイントをクリック: 詳細情報を表示

3. **設定パネル**:
   - データ再ロード: サンプルサイズを変更してデータを再ロード
   - UMAPパラメータ: n_neighbors、min_distを調整してUMAPを再計算
   - クラスタリング: DBSCAN のパラメータを調整してクラスタリングを再計算

## 分析ワークフロー

1. UMAPビューでクラスタを確認
2. 興味のあるクラスタをラッソ選択
3. PCAビューでスライダーを動かし、選択点に基づく重み付きPCAの変化を観察
4. PCA主成分のヒートマップを確認して次元の意味を解釈
5. 詳細ビューで個別データポイントの情報を確認

## コード構成

- `app.py`: Dashアプリケーションのメインファイル
- `requirements.txt`: 依存パッケージのリスト

## 今後の改善点

- 様々なデータセットに対応
- カスタマイズ可能な可視化オプション
- 分析結果のエクスポート機能
